
ScreenManager:
    Screen:
        name: "base"
        BoxLayout:
            orientation: "horizontal"
            # -------left side -------
            FloatLayout:
                PlayPauseButton:
                    id: playpausebutton
                    canvas.before:
                        Color:
                            rgba: [1, 1, 1, 1]
                        Line:
                            width: 1
                            ellipse: (self.x, self.y, self.width, self.height)
                    pos_hint: {"center_x": 0.5, "center_y": 0.1}
                    size_hint: (None, None)
                    width: 90
                    height: 90
                    on_press: self.toggle()
                    on_enter: self._hover_add_background()
                    on_leave: self._hover_remove_background()
                Image:
                    id: playing_channel_img
                    pos_hint: {"center_x": 0.5, "center_y": 0.9}
                    size_hint: (1/4, None)
                    height: self.width
                    source: "./ButtonImages/black.png"
                    canvas.before:
                        Color:
                            rgba: [1, 1, 1, 1]
                        Line:
                            width: 1
                            rectangle: self.x, self.y, self.width, self.height
                
                CoverImage:
                    id: cover_image
                    pos_hint: {"center_x": 0.5, "center_y": 0.55}
                    size_hint: (0.75, None)
                    height: self.width
                    cover_info: app.meta_info
                    on_cover_info: self.update_cover()
                    source: "./ButtonImages/black.png"
                    allow_stretch: True
                    canvas.after:
                        Color:
                            rgba: [1, 1, 1, 1]
                        Line:
                            width: 1
                            rectangle: self.x, self.y, self.width, self.height


                Label:
                    text: app.station
                    pos_hint: {"center_x": 0.5, "center_y": 0.25}
                    width: self.parent.width
                Label:
                    text: app.meta_info
                    pos_hint: {"center_x": 0.5, "center_y": 0.225}
                    size_hint_y: None
                    halign: "center"
                    text_size: self.width, None
                    height: self.texture_size[1]


            # -------right side ------
            TabbedPanel
                do_default_tab: False

                TabbedPanelItem:   
                    text: 'Radio'
                    ScrollView:
                        RadioGrid:

                TabbedPanelItem:
                    text: "News"
                    ScrollView:
                        do_scroll_y: True
                        ScrollView:
                            height: self.parent.height + 0.01
                            NewsGrid:
                TabbedPanelItem:
                    text: "Videos"
                    ScrollView:
                        do_scroll_y: True
                        ScrollView:
                            height: self.parent.height + 0.01
                            VideoGrid:

        
        RelativeLayout:
            CloseMinimzeGrid:
                pos_hint: {'right': 1, 'top': 1}
                text: 'bottom right'
                size_hint: None, None
                size: 100, 30
                cols: 2
                on_leave: self.children_remove()
                on_enter: self.children_add()

<MinimizeButton>:
    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size
    text: "-"
    size_hint_y: None
    on_press: self.minimize_app()

<CloseButton>:
    canvas.before:
        Color:
            rgba: 1, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    text: "x"
    size_hint_y: None
    background_color: 1, 0, 0, 1
    on_press: self.close_app()


<ChannelGrid>:
    size_hint_y: None
    height: self.minimum_height
    cols: 3
    spacing: [5, 5]


<RadioButton>:
    size_hint: (1, None)
    height: self.width
    background_normal: './ButtonImages/' + self.image
    on_press: self.background_normal = '' 
    on_press: 
        self.play_channel()
        app.root.ids.playing_channel_img.source = './ButtonImages/' + self.image
        app.root.ids.cover_image.source = './ButtonImages/' + self.image
        app.playing_description = self.description
    on_release:  self.background_normal = './ButtonImages/' + self.image

<TabbedPanelHeader>
    canvas.after:
        Color:
            rgba: 1,1, 1, 1
        Line:
            points: [self.pos[0] + 2, self.pos[1],self.pos[0] + 2, self.pos[1]+ self.height - 2,self.pos[0] + self.width - 2, self.pos[1]+ self.height - 2, self.pos[0] + self.width - 2, self.pos[1]]
            width: 1
    background_color: 1,1,1,1