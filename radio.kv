
ScreenManager:
    Screen:
        name: "base"
        BoxLayout:
            orientation: "horizontal"
            # -------left side -------
            FloatLayout:
                PlayPauseButton:
                    id: playpausebutton
                    canvas.before:
                        Color:
                            rgba: [1, 1, 1, 1]
                        Line:
                            width: 1
                            ellipse: (self.x, self.y, self.width, self.height)
                    pos_hint: {"center_x": 0.5, "center_y": 0.1}
                    size_hint: (None, None)
                    width: 90
                    height: 90
                    on_press: self.toggle()
                    on_enter: self._hover_add_background()
                    on_leave: self._hover_remove_background()
                Image:
                    id: playing_channel_img
                    pos_hint: {"center_x": 0.5, "center_y": 0.9}
                    size_hint: (1/4, None)
                    height: self.width
                    source: "./ButtonImages/black.png"
                    canvas.before:
                        Color:
                            rgba: [1, 1, 1, 1]
                        Line:
                            width: 1
                            rectangle: self.x, self.y, self.width, self.height
                
                CoverImage:
                    id: cover_image
                    pos_hint: {"center_x": 0.5, "center_y": 0.55}
                    size_hint: (0.75, None)
                    height: self.width
                    cover_info: app.meta_info
                    on_cover_info: self.update_cover()
                    source: "./ButtonImages/black.png"
                    allow_stretch: True
                    canvas.after:
                        Color:
                            rgba: [1, 1, 1, 1]
                        Line:
                            width: 1
                            rectangle: self.x, self.y, self.width, self.height


                Label:
                    text: app.station
                    pos_hint: {"center_x": 0.5, "center_y": 0.25}
                    width: self.parent.width
                Label:
                    text: app.meta_info
                    pos_hint: {"center_x": 0.5, "center_y": 0.225}
                    size_hint_y: None
                    halign: "center"
                    text_size: self.width, None
                    height: self.texture_size[1]


            # -------right side ------
            TabbedPanel
                do_default_tab: False

                TabbedPanelItem:   
                    text: 'Radio'
                    ScrollView:
                        RadioGrid:

                TabbedPanelItem:
                    text: "News"
                    ScrollView:
                        do_scroll_y: True
                        ScrollView:
                            height: self.parent.height + 0.01
                            NewsGrid:
                                DFNews:
                                PodcastBttn:
                                    name:"Economist Radio"
                                    img:"Economist_Radio.png"
                                    url:"https://www.podbean.com/podcast-detail/jdhgv-2ef60/Economist-Radio-Podcast"
                                PodcastBttn:
                                    name: "The-Intelligence-Podcast"
                                    img:"Economist_The_Intelligence.jpeg"
                                    url:"https://www.podbean.com/podcast-detail/54iea-2f1da/The-Intelligence-Podcast"
                                PodcastBttn:
                                    name: "Babbage"
                                    img:"Economist_Babbage.jpeg"
                                    url:"https://www.podbean.com/podcast-detail/c7eq6-35611/Babbage-from-Economist-Radio-Podcast"
                                PodcastBttn:
                                    name: "The Economist Asks"
                                    img:"Economist_asks.jpeg"
                                    url:"https://www.podbean.com/podcast-detail/7pnbt-403a3/The-Economist-Asks-Podcast"
                                PodcastBttn:
                                    name: "Editor's Picks from The Economist"
                                    img:"Economist_Editors_Picks.jpeg"
                                    url:"https://www.podbean.com/podcast-detail/83zby-2f1d2/Editor%27s-Picks-from-The-Economist-Podcast"
                                PodcastBttn:
                                    name: "Money Talks from Economist Radio"
                                    img:"Economist_Money_talks.jpeg"
                                    url:"https://www.podbean.com/podcast-detail/rnbqd-2f1c9/Money-Talks-from-Economist-Radio-Podcast"
                                    

                TabbedPanelItem:
                    text: "Videos"
                    ScrollView:
                        do_scroll_y: True
                        ScrollView:
                            height: self.parent.height + 0.01
                            VideoGrid:

<PodcastBttn>:
    size_hint: (1, None)
    height: self.width
    background_normal: './ButtonImages/' + self.img
    on_press: self.open_popup()
    on_press: self.background_normal = '' 
    on_release:  self.background_normal = './ButtonImages/' + self.img


<ChannelGrid>:
    size_hint_y: None
    height: self.minimum_height
    cols: 3
    spacing: [5, 5]


<RadioButton>:
    size_hint: (1, None)
    height: self.width
    background_normal: './ButtonImages/' + self.image
    on_press: self.background_normal = '' 
    on_press: 
        self.play_channel()
    on_release:  self.background_normal = './ButtonImages/' + self.image

<TabbedPanelHeader>
    canvas.after:
        Color:
            rgba: 1,1, 1, 1
        Line:
            points: [self.pos[0] + 2, self.pos[1],self.pos[0] + 2, self.pos[1]+ self.height - 2,self.pos[0] + self.width - 2, self.pos[1]+ self.height - 2, self.pos[0] + self.width - 2, self.pos[1]]
            width: 1
    background_color: 1,1,1,1

<ScrollGridLayout>:
    size_hint_y: None
    height: self.minimum_height

<PodcastPopupRow>:
    orientation: "horizontal"
    rows: 1
    size_hint_y: None
    height: 100
    spacing: 5
    on_press: print("button pressed")
    on_press: self.play_channel()

    canvas.before:
        Color:
            rgba: [1, 1, 1, 1]
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height

    Image:
        source: './ButtonImages/' + root.image
        size_hint: (None, None)
        width: root.height
        height: root.height
    BoxLayout:
        orientation: "vertical"
        padding: [5,5,5,5]
        spacing: 1
        Label:
            text: root.timestamp
            size_hint_y: 1/3
        Label:
            text: root.description
            text_size: self.width, None
            halign: 'left'
            valign: 'middle'
            


